<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>600å–®å­—ç·´ç¿’-æ‹¼å­—è¼¸å…¥ç·´ç¿’ç³»çµ± (RWDç‰ˆ)</title>
<style>
  body {
    font-family: 'Segoe UI', Arial, sans-serif;
    background: #000;
    color: #fff;
    margin: 0;
    padding: 20px;
    /* é˜²æ­¢æ‰‹æ©Ÿé›™æ“Šç¸®æ”¾ */
    touch-action: manipulation;
  }

  .container {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    gap: 20px;
    max-width: 1400px;
    margin: 0 auto;
  }

  /* å·¦å´æ‹¼å­—å¡ */
  .left-panel {
    width: 100%;
    max-width: 850px;
  }

  .card {
    background: #000;
    border: 2px solid #fff;
    border-radius: 16px;
    padding: 25px;
    box-shadow: 0 0 20px rgba(255,255,255,0.1);
    text-align: center;
    width: 100%;
    box-sizing: border-box; /* ç¢ºä¿ padding ä¸æœƒæ’å¤§å¯¬åº¦ */
  }

  .meaning {
    font-size: 28px;
    color: #a2d2ff;
    margin-bottom: 20px;
    font-weight: bold;
    min-height: 1.2em;
  }

  .input-area {
    display: flex;
    justify-content: center;
    gap: 6px;
    margin: 20px 0;
    flex-wrap: wrap; /* é—œéµï¼šæ‰‹æ©Ÿä¸Šå–®å­—å¤ªé•·å¯ä»¥æ›è¡Œ */
  }

  .letter-box {
    width: 40px;
    height: 46px;
    background: #111;
    border: 2px solid #555;
    border-radius: 6px;
    font-size: 24px;
    text-align: center;
    color: #fff;
    caret-color: #00ff99; /* æ¸¸æ¨™é¡è‰² */
  }

  /* æ‰‹æ©Ÿç‰ˆç¸®å°ä¸€é»è¼¸å…¥æ¡† */
  @media (max-width: 600px) {
    .letter-box {
      width: 32px;
      height: 40px;
      font-size: 20px;
      margin-bottom: 5px; /* æ›è¡Œæ™‚å¢åŠ é–“è· */
    }
    .meaning {
      font-size: 22px;
    }
  }

  .letter-box.correct {
    border-color: #00ff99;
    background: #003333;
    color: #00ff99;
  }

  .btn-group {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 10px;
  }

  button {
    padding: 12px 20px;
    font-size: 16px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    transition: 0.2s;
    white-space: nowrap;
    /* ç¢ºä¿æ‰‹æ©Ÿå¥½é»æ“Š */
    min-width: 80px; 
  }

  .speak-btn { background: #ff8c00; color: #fff; }
  .check-btn { background: #3399ff; color: #fff; }
  .next-btn { background: #28a745; color: #fff; }
  .clear-btn { background: #6c757d; color: #fff; }
  button:hover { opacity: 0.85; filter: brightness(1.1); }
  button:active { transform: scale(0.98); }

  .stats {
    background: #000;
    border: 2px solid #fff;
    border-radius: 12px;
    padding: 15px;
    box-shadow: 0 0 12px rgba(255,255,255,0.1);
    font-size: 16px;
    text-align: left;
    margin-top: 15px;
    width: 100%;
    box-sizing: border-box;
  }
  
  .stats p { margin: 8px 0; }

  .progress-container {
    background: #111;
    border-radius: 12px;
    overflow: hidden;
    height: 18px;
    margin-top: 10px;
    border: 1px solid #333;
  }

  .progress-bar {
    height: 100%;
    background: #00ff99;
    width: 0%;
    transition: width 0.3s;
  }

  /* å³å´å€ */
  .right {
    display: flex;
    flex-direction: column;
    gap: 20px;
    width: 100%;
    max-width: 500px;
  }

  .box {
    background: #000;
    border: 2px solid #fff;
    border-radius: 12px;
    padding: 15px 20px;
    box-shadow: 0 0 15px rgba(255,255,255,0.1);
    box-sizing: border-box;
  }

  h3 { margin-top: 0; color: #fff; border-bottom: 1px solid #333; padding-bottom: 10px; }

  ul { 
    padding-left: 0; 
    list-style: none;
    max-height: 150px; 
    overflow-y: auto; 
  }
  ul li {
    padding: 5px 10px;
    border-bottom: 1px solid #222;
  }
  ul::-webkit-scrollbar { width: 8px; }
  ul::-webkit-scrollbar-thumb { background: #555; border-radius: 4px; }

  .library-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 10px;
    margin-top: 10px;
  }

  select {
    width: 100%;
    height: 160px;
    background: #111;
    color: #fff;
    border: 1px solid #555;
    border-radius: 6px;
    padding: 5px;
    font-size: 14px;
  }

  .move-btns {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  
  .move-btns button {
    min-width: 40px;
    padding: 10px;
    background: #444;
    color: #fff;
  }

  .reset-btn {
    margin-top: 10px;
    background-color: #dc3545;
    color: #fff;
    width: 100%;
  }

  .history-reset-btn {
    margin-top: 8px;
    background-color: #6c757d;
    color: #fff;
    width: 100%;
  }

  /* å·¦å´åº•éƒ¨æŒ‰éˆ•é»‘åº•å€ */
  .down {
    width: 100%;
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 30px;
    padding-bottom: 20px;
    flex-wrap: wrap;
  }
  
  /* RWD åª’é«”æŸ¥è©¢ï¼šç•¶è¢å¹•å°æ–¼ 900px (æ‰‹æ©Ÿ/å¹³æ¿ç›´å‘) */
  @media (max-width: 900px) {
    .container {
      flex-direction: column; /* æ”¹ç‚ºå‚ç›´æ’åˆ— */
      align-items: center;
    }
    
    .left-panel, .right {
      max-width: 100%; /* ä½”æ»¿å¯¬åº¦ */
    }

    .library-container {
      flex-direction: column;
    }
    
    select {
      height: 120px; /* æ‰‹æ©Ÿä¸Šä¸ç”¨å¤ªé«˜ */
    }
    
    .move-btns {
      flex-direction: row; /* æŒ‰éˆ•æ”¹æ©«æ’ */
      width: 100%;
      justify-content: center;
    }

    /* æ‰‹æ©Ÿä¸Šèª¿æ•´è¼¸å…¥å€é–“è· */
    body {
      padding: 10px;
    }
  }
</style>
</head>
<body>

<div class="container">

  <div class="left-panel">
    <div class="card">
      <div class="meaning" id="meaning">è«‹æŒ‰ã€Œä¸‹ä¸€é¡Œã€é–‹å§‹</div>
      
      <div class="input-area" id="inputArea"></div>
      
      <div class="btn-group">
        <button class="speak-btn" onclick="speakWord()">ğŸ”Š ç™¼éŸ³</button>
        <button class="check-btn" onclick="checkAnswer()">ğŸ“ æª¢æŸ¥</button>
        <button class="clear-btn" onclick="clearInputs()">âŒ æ¸…ç©º</button>
        <button class="next-btn" onclick="nextWord()">â¡ï¸ ä¸‹ä¸€é¡Œ</button>
      </div>
      
      <p id="resultMsg" style="margin-top:15px; font-size:18px; color:#ffd700; min-height: 27px;"></p>
    </div>

    <div class="stats">
      <p>ç¸½ç·´ç¿’å–®å­—æ•¸ï¼š<span id="stat-practiced">0</span></p>
      <p>ç­”å°æ¬¡æ•¸ï¼š<span id="stat-correct">0</span></p>
      <p>ç­”éŒ¯æ¬¡æ•¸ï¼š<span id="stat-wrong">0</span></p>
      <p>æ­£ç¢ºç‡ï¼š<span id="stat-accuracy">0</span>%</p>
      <div class="progress-container"><div class="progress-bar" id="progress-bar"></div></div>
    </div>

    <div class="down">
      <button onclick="window.open('https://issac-sjps.github.io/SpellingContest/', '_blank')" style="background:#3399ff;">é¦–é </button>
      <button onclick="window.open('https://issac-sjps.github.io/SpellingContest/600-word-input', '_blank')" style="background:#28a745;">æ‹¼å–®å­—è¼¸å…¥</button>
    </div>

  </div>

  <div class="right">
    <div class="box">
      <h3>ğŸ“œ æ­·å²ç´€éŒ„</h3>
      <ul id="historyList"></ul>
      <button class="history-reset-btn" onclick="resetHistory()">æ¸…ç©ºæ­·å²ç´€éŒ„</button>
    </div>

    <div class="box">
      <h3>ğŸ“š é¡Œåº«ç®¡ç†</h3>
      <div class="library-container">
        <div style="flex:1; width:100%;">
            <div style="margin-bottom:5px; color:#aaa; font-size:12px;">ç¾æœ‰é¡Œåº«</div>
            <select id="mainLibrary" size="8" multiple></select>
        </div>
        
        <div class="move-btns">
          <button onclick="moveToDeleted()" title="ç§»é™¤é¸å®šå–®å­—">â¬‡ï¸ ç§»é™¤</button>
          <button onclick="moveToLibrary()" title="æ¢å¾©é¸å®šå–®å­—">â¬†ï¸ æ¢å¾©</button>
        </div>
        
        <div style="flex:1; width:100%;">
            <div style="margin-bottom:5px; color:#aaa; font-size:12px;">å·²ç§»é™¤ (æš«ä¸ç·´ç¿’)</div>
            <select id="deletedLibrary" size="8" multiple></select>
        </div>
      </div>
      <button class="reset-btn" onclick="resetLibrary()">âš ï¸ é‡ç½®å›å®Œæ•´é¡Œåº«</button>
    </div>
  </div>

</div>

<script>
const fullWords = [
  {en: "able", zh: "èƒ½å¤ â€¦çš„"},
  {en: "about", zh: "é—œæ–¼"},
  {en: "above", zh: "åœ¨â€¦ä¸Šæ–¹"},
  {en: "abroad", zh: "åœ¨åœ‹å¤–"},
  {en: "across", zh: "åœ¨â€¦å°é¢"},
  {en: "actress", zh: "å¥³æ¼”å“¡"},
  {en: "afraid", zh: "å®³æ€•çš„"},
  {en: "agree", zh: "åŒæ„"},
  {en: "ahead", zh: "åœ¨å‰æ–¹"},
  {en: "almost", zh: "å¹¾ä¹"},
  {en: "along", zh: "æ²¿è‘—"},
  {en: "already", zh: "å·²ç¶“"},
  {en: "always", zh: "ç¸½æ˜¯"},
  {en: "another", zh: "å¦ä¸€å€‹"},
  {en: "anyone", zh: "ä»»ä½•äºº"},
  {en: "anything", zh: "ä»»ä½•äº‹ç‰©"},
  {en: "apartment", zh: "å…¬å¯“"},
  {en: "appear", zh: "å‡ºç¾"},
  {en: "around", zh: "åœ¨â€¦å››å‘¨"},
  {en: "arrive", zh: "åˆ°é”"},
  {en: "aunt", zh: "ä¼¯(å”)æ¯"},
  {en: "autumn", zh: "ç§‹å¤©"},
  {en: "badminton", zh: "ç¾½æ¯›çƒ"},
  {en: "bake", zh: "çƒ˜çƒ¤"},
  {en: "bakery", zh: "éºµåŒ…åº—"},
  {en: "balcony", zh: "é™½å°"},
  {en: "band", zh: "æ¨‚åœ˜"},
  {en: "barbecue", zh: "çƒ¤è‚‰"},
  {en: "bath", zh: "æ´—æ¾¡"},
  {en: "bean", zh: "è±†"},
  {en: "beautiful", zh: "ç¾éº—çš„"},
  {en: "because", zh: "å› ç‚º"},
  {en: "become", zh: "è®Šæˆ"},
  {en: "bedroom", zh: "è‡¥å®¤"},
  {en: "before", zh: "åœ¨â€¦ä¹‹å‰"},
  {en: "begin", zh: "é–‹å§‹"},
  {en: "behind", zh: "åœ¨â€¦å¾Œé¢"},
  {en: "believe", zh: "ç›¸ä¿¡"},
  {en: "belong", zh: "å±¬æ–¼"},
  {en: "below", zh: "åœ¨â€¦ä¸‹æ–¹"},
  {en: "belt", zh: "çš®å¸¶"},
  {en: "bench", zh: "é•·æ¤…"},
  {en: "beside", zh: "åœ¨â€¦æ—é‚Š"},
  {en: "between", zh: "åœ¨â€¦ä¹‹é–“"},
  {en: "bike", zh: "è…³è¸è»Š"},
  {en: "bite", zh: "å’¬"},
  {en: "blanket", zh: "æ¯¯å­"},
  {en: "blind", zh: "ççš„"},
  {en: "block", zh: "è¡—å€"},
  {en: "blow", zh: "å¹"},
  {en: "boil", zh: "ç…®æ²¸"},
  {en: "bookstore", zh: "æ›¸åº—"},
  {en: "bored", zh: "æ„Ÿåˆ°å­ç…©çš„"},
  {en: "boring", zh: "ç„¡èŠçš„"},
  {en: "born", zh: "å‡ºç”Ÿ"},
  {en: "borrow", zh: "å€Ÿå…¥"},
  {en: "both", zh: "å…©è€…éƒ½"},
  {en: "bottle", zh: "ç“¶å­"},
  {en: "bottom", zh: "åº•éƒ¨"},
  {en: "bow", zh: "æ•¬ç¦®"},
  {en: "bowl", zh: "ç¢—"},
  {en: "bread", zh: "éºµåŒ…"},
  {en: "break", zh: "æ‰“ç ´"},
  {en: "bridge", zh: "æ©‹"},
  {en: "bright", zh: "æ˜äº®çš„"},
  {en: "bring", zh: "å¸¶ä¾†"},
  {en: "brown", zh: "è¤è‰²(çš„)"},
  {en: "brush", zh: "åˆ·"},
  {en: "build", zh: "å»ºé€ "},
  {en: "bun", zh: "å°åœ“éºµåŒ…"},
  {en: "burn", zh: "ç‡ƒç‡’"},
  {en: "business", zh: "ç”Ÿæ„"},
  {en: "businessman", zh: "å•†äºº"},
  {en: "busy", zh: "å¿™ç¢Œçš„"},
  {en: "butter", zh: "å¥¶æ²¹"},
  {en: "butterfly", zh: "è´è¶"},
  {en: "cage", zh: "ç± å­"},
  {en: "candle", zh: "è Ÿç‡­"},
  {en: "care", zh: "é—œå¿ƒ"},
  {en: "careful", zh: "ä»”ç´°çš„"},
  {en: "carry", zh: "æ”œå¸¶"},
  {en: "case", zh: "æƒ…å½¢"},
  {en: "castle", zh: "åŸå ¡"},
  {en: "catch", zh: "è¶•ä¸Š"},
  {en: "celebrate", zh: "æ…¶ç¥"},
  {en: "cell phone", zh: "æ‰‹æ©Ÿ"},
  {en: "cent", zh: "(ä¸€)åˆ†éŒ¢"},
  {en: "center", zh: "ä¸­å¿ƒ"},
  {en: "centimeter", zh: "å…¬åˆ†"},
  {en: "chalk", zh: "ç²‰ç­†"},
  {en: "chance", zh: "æ©Ÿæœƒ"},
  {en: "change", zh: "é›¶éŒ¢"},
  {en: "cheap", zh: "ä¾¿å®œçš„"},
  {en: "cheat", zh: "æ¬ºé¨™"},
  {en: "check", zh: "æª¢æŸ¥"},
  {en: "cheer", zh: "æ­¡å‘¼"},
  {en: "cheese", zh: "ä¹³é…ª"},
  {en: "chess", zh: "è¥¿æ´‹æ£‹"},
  {en: "child", zh: "å°å­©"},
  {en: "chocolate", zh: "å·§å…‹åŠ›"},
  {en: "choose", zh: "é¸æ“‡"},
  {en: "chopsticks", zh: "ç­·å­"},
  {en: "church", zh: "æ•™å ‚"},
  {en: "clap", zh: "æ‹æ‰‹"},
  {en: "clear", zh: "æ¸…æ¥šçš„"},
  {en: "clerk", zh: "åº—å“¡"},
  {en: "climb", zh: "çˆ¬"},
  {en: "close", zh: "é—œä¸Š"},
  {en: "clothes", zh: "è¡£æœ"},
  {en: "cloudy", zh: "å¤šé›²çš„"},
  {en: "club", zh: "ç¤¾åœ˜"},
  {en: "coat", zh: "å¤§è¡£"},
  {en: "collect", zh: "æ”¶é›†"},
  {en: "comb", zh: "æ¢³å­"},
  {en: "comfortable", zh: "èˆ’é©çš„"},
  {en: "comic", zh: "é€£ç’°ç•«çš„"},
  {en: "common", zh: "å…±åŒçš„"},
  {en: "convenient", zh: "æ–¹ä¾¿çš„"},
  {en: "corner", zh: "è§’è½"},
  {en: "correct", zh: "æ­£ç¢ºçš„"},
  {en: "cost", zh: "åƒ¹å€¼"},
  {en: "couch", zh: "æ²™ç™¼"},
  {en: "count", zh: "æ•¸"},
  {en: "country", zh: "é„‰æ‘"},
  {en: "course", zh: "èª²ç¨‹"},
  {en: "cousin", zh: "(è¡¨)å…„å¼Ÿå§Šå¦¹"},
  {en: "cover", zh: "è¦†è“‹"},
  {en: "crazy", zh: "ç˜‹ç‹‚çš„"},
  {en: "cross", zh: "è¶Šé"},
  {en: "dangerous", zh: "å±éšªçš„"},
  {en: "dark", zh: "é»‘æš—çš„"},
  {en: "date", zh: "æ—¥æœŸ"},
  {en: "daughter", zh: "å¥³å…’"},
  {en: "dead", zh: "æ­»çš„"},
  {en: "decide", zh: "æ±ºå®š"},
  {en: "delicious", zh: "ç¾å‘³çš„"},
  {en: "dentist", zh: "ç‰™é†«"},
  {en: "department store", zh: "ç™¾è²¨å…¬å¸"},
  {en: "dictionary", zh: "å­—å…¸"},
  {en: "die", zh: "æ­»äº¡"},
  {en: "different", zh: "ä¸åŒçš„"},
  {en: "difficult", zh: "å›°é›£çš„"},
  {en: "dig", zh: "æŒ–æ˜"},
  {en: "dining room", zh: "é£¯å»³"},
  {en: "dirty", zh: "éª¯é«’çš„"},
  {en: "dish", zh: "ç›¤å­"},
  {en: "dodge ball", zh: "èº²é¿çƒ"},
  {en: "doll", zh: "æ´‹å¨ƒå¨ƒ"},
  {en: "dollar", zh: "å…ƒ"},
  {en: "dot", zh: "é»"},
  {en: "dozen", zh: "ä¸€æ‰“"},
  {en: "dragon", zh: "é¾"},
  {en: "draw", zh: "ç•«"},
  {en: "drawer", zh: "æŠ½å±œ"},
  {en: "dress", zh: "æ´‹è£"},
  {en: "driver", zh: "é§•é§›è€…"},
  {en: "drop", zh: "æ‰è½"},
  {en: "drum", zh: "é¼“"},
  {en: "dry", zh: "ä¹¾çš„"},
  {en: "dumpling", zh: "æ¹¯åœ“"},
  {en: "during", zh: "åœ¨â€¦æœŸé–“"},
  {en: "earth", zh: "åœ°çƒ"},
  {en: "east", zh: "æ±æ–¹"},
  {en: "either", zh: "ä¹Ÿä¸"},
  {en: "elementary school", zh: "å°å­¸"},
  {en: "else", zh: "å…¶ä»–çš„"},
  {en: "e-mail", zh: "é›»å­éƒµä»¶"},
  {en: "engineer", zh: "å·¥ç¨‹å¸«"},
  {en: "enjoy", zh: "å–œæ„›"},
  {en: "enough", zh: "è¶³å¤ çš„"},
  {en: "enter", zh: "é€²å…¥"},
  {en: "envelope", zh: "ä¿¡å°"},
  {en: "eraser", zh: "æ©¡çš®æ“¦"},
  {en: "even", zh: "ç”šè‡³"},
  {en: "evening", zh: "å‚æ™š"},
  {en: "ever", zh: "æ›¾ç¶“"},
  {en: "example", zh: "ä¾‹å­"},
  {en: "excellent", zh: "æ¥µå¥½çš„"},
  {en: "except", zh: "é™¤äº†â€¦ä¹‹å¤–"},
  {en: "excited", zh: "æ„Ÿèˆˆå¥®çš„"},
  {en: "exciting", zh: "ä»¤äººèˆˆå¥®çš„"},
  {en: "excuse", zh: "åŸè«’"},
  {en: "exercise", zh: "é‹å‹•"},
  {en: "expensive", zh: "æ˜‚è²´çš„"},
  {en: "experience", zh: "ç¶“é©—"},
  {en: "fact", zh: "äº‹å¯¦"},
  {en: "factory", zh: "å·¥å» "},
  {en: "fail", zh: "å¤±æ•—"},
  {en: "fall", zh: "ç§‹å¤©"},
  {en: "famous", zh: "æœ‰åçš„"},
  {en: "favorite", zh: "æœ€å–œæ„›çš„"},
  {en: "February", zh: "äºŒæœˆ"},
  {en: "feed", zh: "é¤µ"},
  {en: "festival", zh: "ç¯€æ…¶"},
  {en: "fever", zh: "ç™¼ç‡’"},
  {en: "fight", zh: "æ‰“æ¶"},
  {en: "fill", zh: "è£æ»¿"},
  {en: "finally", zh: "æœ€å¾Œ"},
  {en: "finish", zh: "å®Œæˆ"},
  {en: "fix", zh: "ä¿®ç†"},
  {en: "floor", zh: "åœ°æ¿"},
  {en: "flute", zh: "ç¬›"},
  {en: "follow", zh: "éµå¾ª"},
  {en: "foreign", zh: "å¤–åœ‹çš„"},
  {en: "foreigner", zh: "å¤–åœ‹äºº"},
  {en: "forget", zh: "å¿˜è¨˜"},
  {en: "fork", zh: "å‰å­"},
  {en: "forty", zh: "å››å"},
  {en: "fourth", zh: "ç¬¬å››"},
  {en: "French fries", zh: "è–¯æ¢"},
  {en: "fresh", zh: "æ–°é®®çš„"},
  {en: "friendly", zh: "å‹å–„çš„"},
  {en: "frisbee", zh: "é£›ç›¤"},
  {en: "frog", zh: "è›™"},
  {en: "front", zh: "å‰é¢"},
  {en: "fruit", zh: "æ°´æœ"},
  {en: "fry", zh: "æ²¹ç‚¸"},
  {en: "full", zh: "æ»¿çš„"},
  {en: "funny", zh: "å¥½ç¬‘çš„"},
  {en: "future", zh: "æœªä¾†"},
  {en: "garbage", zh: "åƒåœ¾"},
  {en: "gas", zh: "ç“¦æ–¯"},
  {en: "gate", zh: "å¤§é–€"},
  {en: "giant", zh: "å·¨å¤§çš„/å·¨äºº"},
  {en: "glad", zh: "é«˜èˆˆçš„"},
  {en: "glass", zh: "ç»ç’ƒæ¯"},
  {en: "glasses", zh: "çœ¼é¡"},
  {en: "glove", zh: "æ‰‹å¥—"},
  {en: "goat", zh: "å±±ç¾Š"},
  {en: "goose", zh: "éµ"},
  {en: "grade", zh: "æˆç¸¾"},
  {en: "gram", zh: "å…¬å…‹"},
  {en: "grass", zh: "è‰"},
  {en: "gray", zh: "ç°è‰²çš„"},
  {en: "ground", zh: "åœ°é¢"},
  {en: "group", zh: "åœ˜é«”"},
  {en: "grow", zh: "ç¨®æ¤"},
  {en: "guava", zh: "ç•ªçŸ³æ¦´"},
  {en: "guess", zh: "çŒœæƒ³"},
  {en: "guitar", zh: "å‰ä»–"},
  {en: "gym", zh: "é«”è‚²é¤¨"},
  {en: "habit", zh: "ç¿’æ…£"},
  {en: "half", zh: "ä¸€åŠ"},
  {en: "hamburger", zh: "æ¼¢å ¡"},
  {en: "handsome", zh: "è‹±ä¿Šçš„"},
  {en: "hang", zh: "æ‡¸æ›"},
  {en: "happen", zh: "ç™¼ç”Ÿ"},
  {en: "hard", zh: "å›°é›£çš„"},
  {en: "hard-working", zh: "åŠªåŠ›å·¥ä½œçš„"},
  {en: "headache", zh: "é ­ç—›"},
  {en: "health", zh: "å¥åº·"},
  {en: "healthy", zh: "å¥åº·çš„"},
  {en: "heat", zh: "ç†±"},
  {en: "heavy", zh: "é‡çš„"},
  {en: "helpful", zh: "æœ‰å¹«åŠ©çš„"},
  {en: "hide", zh: "éš±è—"},
  {en: "hike", zh: "å¾’æ­¥æ—…è¡Œ"},
  {en: "hill", zh: "å°å±±"},
  {en: "history", zh: "æ­·å²"},
  {en: "hit", zh: "æ‰“æ“Š"},
  {en: "hobby", zh: "å—œå¥½"},
  {en: "hold", zh: "æ‹¿è‘—"},
  {en: "holiday", zh: "å‡æ—¥"},
  {en: "homework", zh: "å®¶åº­ä½œæ¥­"},
  {en: "honest", zh: "èª å¯¦çš„"},
  {en: "hotel", zh: "æ—…ç¤¾"},
  {en: "hour", zh: "å°æ™‚"},
  {en: "housewife", zh: "å®¶åº­ä¸»å©¦"},
  {en: "however", zh: "ç„¶è€Œ"},
  {en: "hunt", zh: "æ‰“çµ"},
  {en: "hurry", zh: "è¶•å¿™"},
  {en: "hurt", zh: "å—å‚·"},
  {en: "husband", zh: "ä¸ˆå¤«"},
  {en: "important", zh: "é‡è¦çš„"},
  {en: "insect", zh: "æ˜†èŸ²"},
  {en: "inside", zh: "åœ¨...å…§éƒ¨"},
  {en: "interesting", zh: "æœ‰è¶£çš„"},
  {en: "interview", zh: "è¨ªå•"},
  {en: "Internet", zh: "ç¶²è·¯"},
  {en: "invite", zh: "é‚€è«‹"},
  {en: "island", zh: "å³¶å¶¼"},
  {en: "jacket", zh: "å¤¾å…‹"},
  {en: "jeans", zh: "ç‰›ä»”è¤²"},
  {en: "join", zh: "åŠ å…¥"},
  {en: "junior high school", zh: "åœ‹ä¸­"},
  {en: "kangaroo", zh: "è¢‹é¼ "},
  {en: "kind", zh: "ç¨®é¡"},
  {en: "knock", zh: "æ•²"},
  {en: "know", zh: "çŸ¥é“"},
  {en: "knowledge", zh: "çŸ¥è­˜"},
  {en: "koala", zh: "ç„¡å°¾ç†Š"},
  {en: "lake", zh: "æ¹–"},
  {en: "lamp", zh: "ç‡ˆ"},
  {en: "land", zh: "åœŸåœ°"},
  {en: "language", zh: "èªè¨€"},
  {en: "lantern", zh: "ç‡ˆç± "},
  {en: "large", zh: "å¤§çš„"},
  {en: "last", zh: "æœ€å¾Œçš„"},
  {en: "later", zh: "è¼ƒæ™š"},
  {en: "lawyer", zh: "å¾‹å¸«"},
  {en: "lazy", zh: "æ‡¶æƒ°çš„"},
  {en: "lead", zh: "å¼•å°"},
  {en: "leader", zh: "é ˜å°è€…"},
  {en: "learn", zh: "å­¸ç¿’"},
  {en: "least", zh: "æœ€å°‘"},
  {en: "leave", zh: "é›¢é–‹"},
  {en: "lemon", zh: "æª¸æª¬"},
  {en: "lend", zh: "å€Ÿå‡º"},
  {en: "less", zh: "è¼ƒå°‘çš„"},
  {en: "lesson", zh: "èª²"},
  {en: "letter", zh: "ä¿¡"},
  {en: "lettuce", zh: "èµè‹£"},
  {en: "lid", zh: "è“‹å­"},
  {en: "lie", zh: "èªªè¬Š"},
  {en: "light", zh: "ç‡ˆ"},
  {en: "line", zh: "éšŠä¼"},
  {en: "list", zh: "è¡¨"},
  {en: "lonely", zh: "å¯‚å¯çš„"},
  {en: "lose", zh: "éºå¤±"},
  {en: "loud", zh: "å¤§è²çš„"},
  {en: "lucky", zh: "å¹¸é‹çš„"},
  {en: "machine", zh: "æ©Ÿå™¨"},
  {en: "mad", zh: "ç˜‹ç‹‚çš„"},
  {en: "mark", zh: "åšè¨˜è™Ÿ"},
  {en: "marker", zh: "ç°½å­—ç­†"},
  {en: "married", zh: "å·²å©šçš„"},
  {en: "mask", zh: "é¢å…·"},
  {en: "mat", zh: "å¢Šå­"},
  {en: "matter", zh: "äº‹æƒ…"},
  {en: "meal", zh: "ä¸€é¤"},
  {en: "mean", zh: "æ„æŒ‡"},
  {en: "meat", zh: "è‚‰"},
  {en: "medicine", zh: "è—¥"},
  {en: "medium", zh: "ä¸­è™Ÿ"},
  {en: "meet", zh: "é‡è¦‹"},
  {en: "meeting", zh: "æœƒè­°"},
  {en: "menu", zh: "èœå–®"},
  {en: "mile", zh: "å“©"},
  {en: "million", zh: "ç™¾è¬"},
  {en: "mind", zh: "ä»‹æ„"},
  {en: "minute", zh: "åˆ†é˜"},
  {en: "mistake", zh: "éŒ¯èª¤"},
  {en: "modern", zh: "ç¾ä»£åŒ–çš„"},
  {en: "moment", zh: "ç‰‡åˆ»"},
  {en: "mop", zh: "æ‹–åœ°"},
  {en: "more", zh: "æ›´å¤šçš„"},
  {en: "mountain", zh: "å±±"},
  {en: "move", zh: "ç§»å‹•"},
  {en: "Ms.", zh: "å¥³å£«"},
  {en: "mud", zh: "æ³¥"},
  {en: "museum", zh: "åšç‰©é¤¨"},
  {en: "nail", zh: "é‡˜å­"},
  {en: "national", zh: "åœ‹å®¶çš„"},
  {en: "neck", zh: "è„–å­"},
  {en: "neighbor", zh: "é„°å±…"},
  {en: "news", zh: "æ¶ˆæ¯"},
  {en: "ninth", zh: "ç¬¬ä¹"},
  {en: "nod", zh: "é»é ­"},
  {en: "noise", zh: "å™ªéŸ³"},
  {en: "noodle", zh: "éºµæ¢"},
  {en: "north", zh: "åŒ—æ–¹"},
  {en: "notebook", zh: "ç­†è¨˜æœ¬"},
  {en: "notice", zh: "æ³¨æ„åˆ°"},
  {en: "office", zh: "è¾¦å…¬å®¤"},
  {en: "officer", zh: "è­¦å®˜"},
  {en: "often", zh: "æ™‚å¸¸"},
  {en: "order", zh: "é»é¤"},
  {en: "other", zh: "å…¶ä»–çš„"},
  {en: "outside", zh: "åœ¨...å¤–é¢"},
  {en: "own", zh: "è‡ªå·±çš„"},
  {en: "pack", zh: "åŒ…"},
  {en: "package", zh: "åŒ…è£¹"},
  {en: "paint", zh: "ç¹ªç•«"},
  {en: "pair", zh: "ä¸€é›™"},
  {en: "pants", zh: "é•·è¤²"},
  {en: "papaya", zh: "æœ¨ç“œ"},
  {en: "parent", zh: "çˆ¶(æ¯)è¦ª"},
  {en: "part", zh: "éƒ¨åˆ†"},
  {en: "past", zh: "ç¶“é"},
  {en: "paste", zh: "é»è²¼"},
  {en: "pear", zh: "æ¢¨å­"},
  {en: "people", zh: "äººå€‘"},
  {en: "perhaps", zh: "æˆ–è¨±"},
  {en: "person", zh: "äºº"},
  {en: "piano", zh: "é‹¼ç´"},
  {en: "piece", zh: "ç‰‡"},
  {en: "pin", zh: "å¤§é ­é‡"},
  {en: "pipe", zh: "ç®¡"},
  {en: "place", zh: "åœ°æ–¹"},
  {en: "planet", zh: "è¡Œæ˜Ÿ"},
  {en: "plant", zh: "æ¤ç‰©"},
  {en: "playground", zh: "æ“å ´"},
  {en: "pleasure", zh: "æ¨‚äº‹"},
  {en: "polite", zh: "æœ‰ç¦®è²Œçš„"},
  {en: "pond", zh: "æ± å¡˜"},
  {en: "pool", zh: "æ¸¸æ³³æ± "},
  {en: "poor", zh: "è²§å›°çš„"},
  {en: "popcorn", zh: "çˆ†ç±³èŠ±"},
  {en: "popular", zh: "å—æ­¡è¿çš„"},
  {en: "pork", zh: "è±¬è‚‰"},
  {en: "possible", zh: "å¯èƒ½çš„"},
  {en: "post office", zh: "éƒµå±€"},
  {en: "postcard", zh: "æ˜ä¿¡ç‰‡"},
  {en: "pot", zh: "ç½"},
  {en: "pound", zh: "ç£…"},
  {en: "practice", zh: "ç·´ç¿’"},
  {en: "pray", zh: "ç¥ˆç¦±"},
  {en: "prepare", zh: "æº–å‚™"},
  {en: "present", zh: "ç¦®ç‰©"},
  {en: "pretty", zh: "æ¼‚äº®çš„"},
  {en: "price", zh: "åƒ¹æ ¼"},
  {en: "princess", zh: "å…¬ä¸»"},
  {en: "prize", zh: "ç"},
  {en: "problem", zh: "å•é¡Œ"},
  {en: "program", zh: "ç¯€ç›®"},
  {en: "proud", zh: "é©•å‚²çš„"},
  {en: "public", zh: "å…¬ç«‹çš„"},
  {en: "purple", zh: "ç´«è‰²çš„"},
  {en: "quarter", zh: "ä¸€åˆ»é˜"},
  {en: "queen", zh: "çš‡å"},
  {en: "quick", zh: "è¿…é€Ÿçš„"},
  {en: "quiet", zh: "å®‰éœçš„"},
  {en: "quite", zh: "ç›¸ç•¶"},
  {en: "quiz", zh: "å°è€ƒ"},
  {en: "railroad", zh: "éµè·¯"},
  {en: "raise", zh: "èˆ‰èµ·"},
  {en: "refrigerator", zh: "å†°ç®±"},
  {en: "remember", zh: "è¨˜å¾—"},
  {en: "repeat", zh: "é‡è¤‡"},
  {en: "reporter", zh: "è¨˜è€…"},
  {en: "restaurant", zh: "é¤é¤¨"},
  {en: "river", zh: "æ²³"},
  {en: "road", zh: "é“è·¯"},
  {en: "robot", zh: "æ©Ÿå™¨äºº"},
  {en: "rock", zh: "å²©çŸ³"},
  {en: "roll", zh: "æ»¾"},
  {en: "roller-skate", zh: "æºœå†°"},
  {en: "rope", zh: "ç¹©å­"},
  {en: "round", zh: "åœ“å½¢çš„"},
  {en: "row", zh: "åˆ’(èˆ¹)"},
  {en: "rule", zh: "è¦å‰‡"},
  {en: "sail", zh: "èˆªè¡Œ"},
  {en: "salad", zh: "æ²™æ‹‰"},
  {en: "sale", zh: "å‡ºå”®"},
  {en: "salesman", zh: "æ¨éŠ·å“¡"},
  {en: "salt", zh: "é¹½"},
  {en: "sandwich", zh: "ä¸‰æ˜æ²»"},
  {en: "sacred", zh: "ç¥è–çš„"},
  {en: "save", zh: "ç¯€çœ"},
  {en: "scooter", zh: "é€Ÿå…‹é”æ©Ÿè»Š"},
  {en: "screen", zh: "è¢å¹•"},
  {en: "season", zh: "å­£ç¯€"},
  {en: "second", zh: "ç¬¬äºŒ"},
  {en: "secretary", zh: "ç§˜æ›¸"},
  {en: "seed", zh: "ç¨®å­"},
  {en: "seesaw", zh: "è¹ºè¹ºæ¿"},
  {en: "seldom", zh: "å¾ˆå°‘"},
  {en: "senior high school", zh: "é«˜ä¸­"},
  {en: "sentence", zh: "å¥å­"},
  {en: "serious", zh: "åš´é‡çš„"},
  {en: "set", zh: "(é›»è¦–)æ©Ÿ"},
  {en: "several", zh: "å¹¾å€‹çš„"},
  {en: "shake", zh: "æ–å‹•"},
  {en: "shape", zh: "å½¢ç‹€"},
  {en: "shirt", zh: "è¥¯è¡«"},
  {en: "shopkeeper", zh: "åº—ä¸»"},
  {en: "shorts", zh: "çŸ­è¤²"},
  {en: "should", zh: "æ‡‰è©²"},
  {en: "shoulder", zh: "è‚©è†€"},
  {en: "shout", zh: "å–Šå«"},
  {en: "side", zh: "æ—é‚Š"},
  {en: "sidewalk", zh: "äººè¡Œé“"},
  {en: "sight", zh: "è¦–åŠ›"},
  {en: "sign", zh: "æ¨™èªŒ"},
  {en: "simple", zh: "ç°¡å–®çš„"},
  {en: "since", zh: "è‡ªå¾"},
  {en: "sister", zh: "å§Šå¦¹"},
  {en: "skate", zh: "æºœå†°"},
  {en: "skirt", zh: "è£™å­"},
  {en: "slide", zh: "æºœæ»‘æ¢¯"},
  {en: "slim", zh: "è‹—æ¢çš„"},
  {en: "smell", zh: "èèµ·ä¾†"},
  {en: "smile", zh: "å¾®ç¬‘"},
  {en: "smoke", zh: "ç…™"},
  {en: "snack", zh: "é»å¿ƒ"},
  {en: "snake", zh: "è›‡"},
  {en: "soldier", zh: "è»äºº"},
  {en: "soon", zh: "ä¸ä¹…"},
  {en: "sore", zh: "ç–¼ç—›çš„"},
  {en: "sound", zh: "è½èµ·ä¾†"},
  {en: "soup", zh: "æ¹¯"},
  {en: "south", zh: "å—æ–¹"},
  {en: "space", zh: "ç©ºé–“"},
  {en: "spaghetti", zh: "ç¾©å¤§åˆ©éºµ"},
  {en: "special", zh: "ç‰¹åˆ¥çš„"},
  {en: "spell", zh: "æ‹¼å­—"},
  {en: "spend", zh: "èŠ±è²»"},
  {en: "spider", zh: "èœ˜è››"},
  {en: "square", zh: "æ­£æ–¹å½¢çš„"},
  {en: "stairs", zh: "æ¨“æ¢¯"},
  {en: "stamp", zh: "éƒµç¥¨"},
  {en: "station", zh: "è»Šç«™"},
  {en: "steak", zh: "ç‰›æ’"},
  {en: "still", zh: "ä»ç„¶"},
  {en: "stomach", zh: "èƒƒ"},
  {en: "straight", zh: "ç›´çš„"},
  {en: "strange", zh: "å¥‡æ€ªçš„"},
  {en: "stranger", zh: "é™Œç”Ÿäºº"},
  {en: "strawberry", zh: "è‰è“"},
  {en: "stupid", zh: "ç¬¨çš„"},
  {en: "subject", zh: "ç§‘ç›®"},
  {en: "successful", zh: "æˆåŠŸçš„"},
  {en: "sugar", zh: "ç³–"},
  {en: "surf", zh: "è¡æµª"},
  {en: "surprise", zh: "ä½¿é©šè¨"},
  {en: "surprised", zh: "æ„Ÿé©šè¨çš„"},
  {en: "sweater", zh: "æ¯›è¡£"},
  {en: "swing", zh: "é¦éŸ†"},
  {en: "taste", zh: "å“åš"},
  {en: "teenager", zh: "é’å°‘å¹´"},
  {en: "temple", zh: "å¯ºå»Ÿ"},
  {en: "tennis", zh: "ç¶²çƒ"},
  {en: "terrible", zh: "å¯æ€•çš„"},
  {en: "theater", zh: "æˆ²é™¢"},
  {en: "thick", zh: "åšçš„"},
  {en: "thirsty", zh: "å£æ¸´çš„"},
  {en: "thirty", zh: "ä¸‰å"},
  {en: "throat", zh: "å–‰åš¨"},
  {en: "throw", zh: "ä¸Ÿ"},
  {en: "those", zh: "é‚£äº›"},
  {en: "though", zh: "é›–ç„¶"},
  {en: "thousand", zh: "åƒ"},
  {en: "ticket", zh: "ç¥¨"},
  {en: "tidy", zh: "æ•´æ½”çš„"},
  {en: "tie", zh: "é ˜å¸¶"},
  {en: "tired", zh: "ç–²å€¦çš„"},
  {en: "toast", zh: "åœŸå¸"},
  {en: "toe", zh: "è…³è¶¾"},
  {en: "together", zh: "ä¸€èµ·"},
  {en: "tomato", zh: "ç•ªèŒ„"},
  {en: "tonight", zh: "ä»Šæ™š"},
  {en: "total", zh: "ç¸½è¨ˆ"},
  {en: "touch", zh: "ç¢°è§¸"},
  {en: "towel", zh: "æ¯›å·¾"},
  {en: "town", zh: "åŸé®"},
  {en: "traffic", zh: "äº¤é€š"},
  {en: "trash", zh: "åƒåœ¾"},
  {en: "treat", zh: "è«‹å®¢"},
  {en: "trick", zh: "æƒ¡ä½œåŠ‡"},
  {en: "trip", zh: "æ—…è¡Œ"},
  {en: "trouble", zh: "éº»ç…©"},
  {en: "truck", zh: "å¡è»Š"},
  {en: "tub", zh: "æµ´ç¼¸"},
  {en: "turn", zh: "è½‰å‹•"},
  {en: "twice", zh: "å…©æ¬¡"},
  {en: "type", zh: "æ‰“å­—"},
  {en: "typhoon", zh: "é¢±é¢¨"},
  {en: "umbrella", zh: "é›¨å‚˜"},
  {en: "uncle", zh: "ä¼¯(å”)"},
  {en: "understand", zh: "äº†è§£"},
  {en: "uniform", zh: "åˆ¶æœ"},
  {en: "until", zh: "ç›´åˆ°"},
  {en: "useful", zh: "æœ‰ç”¨çš„"},
  {en: "usually", zh: "é€šå¸¸"},
  {en: "vacation", zh: "å‡æœŸ"},
  {en: "vegetable", zh: "è”¬èœ"},
  {en: "vest", zh: "èƒŒå¿ƒ"},
  {en: "video", zh: "å½±åƒçš„"},
  {en: "violin", zh: "å°æç´"},
  {en: "visit", zh: "åƒè§€"},
  {en: "voice", zh: "è²éŸ³"},
  {en: "waiter", zh: "ç”·æœå‹™ç”Ÿ"},
  {en: "waitress", zh: "å¥³æœå‹™ç”Ÿ"},
  {en: "wallet", zh: "çš®å¤¾"},
  {en: "warm", zh: "æº«æš–çš„"},
  {en: "watermelon", zh: "è¥¿ç“œ"},
  {en: "wave", zh: "æ³¢æµª"},
  {en: "weak", zh: "å¼±çš„"},
  {en: "weather", zh: "å¤©æ°£"},
  {en: "Wednesday", zh: "æ˜ŸæœŸä¸‰"},
  {en: "weekend", zh: "é€±æœ«"},
  {en: "welcome", zh: "å—æ­¡è¿çš„"},
  {en: "west", zh: "è¥¿æ–¹"},
  {en: "whale", zh: "é¯¨é­š"},
  {en: "whether", zh: "æ˜¯å¦"},
  {en: "which", zh: "å“ªä¸€å€‹"},
  {en: "white", zh: "ç™½è‰²(çš„)"},
  {en: "whose", zh: "èª°çš„"},
  {en: "wife", zh: "å¦»å­"},
  {en: "wind", zh: "é¢¨"},
  {en: "windy", zh: "å¤šé¢¨çš„"},
  {en: "wise", zh: "æ˜æ™ºçš„"},
  {en: "without", zh: "æ²’æœ‰"},
  {en: "wonderful", zh: "æ¥µå¥½çš„"},
  {en: "workbook", zh: "ä½œæ¥­æœ¬"},
  {en: "worker", zh: "å·¥äºº"},
  {en: "worry", zh: "æ“”å¿ƒ"},
  {en: "wrong", zh: "éŒ¯èª¤çš„"},
  {en: "yard", zh: "åº­é™¢"},
  {en: "yellow", zh: "é»ƒè‰²(çš„)"}
];

let activeLibrary = JSON.parse(localStorage.getItem("activeLibrary")) || [...fullWords];
let deletedLibrary = JSON.parse(localStorage.getItem("deletedLibrary")) || [];
let currentWord = {};
let total = 0, correct = 0, wrong = 0;
let history = JSON.parse(localStorage.getItem("spellHistory")) || [];

function saveAll() {
  localStorage.setItem("activeLibrary", JSON.stringify(activeLibrary));
  localStorage.setItem("deletedLibrary", JSON.stringify(deletedLibrary));
  localStorage.setItem("spellHistory", JSON.stringify(history));
}

function updateLibraryDisplay() {
  const main = document.getElementById("mainLibrary");
  const del = document.getElementById("deletedLibrary");
  main.innerHTML = del.innerHTML = "";
  activeLibrary.forEach((w, i) => {
    const o = document.createElement("option");
    o.value = i; o.textContent = `${w.en} - ${w.zh}`; main.appendChild(o);
  });
  deletedLibrary.forEach((w, i) => {
    const o = document.createElement("option");
    o.value = i; o.textContent = `${w.en} - ${w.zh}`; del.appendChild(o);
  });
}

function getRandomWord() {
  if (activeLibrary.length === 0) { alert("é¡Œåº«ç‚ºç©ºï¼è«‹å¾å³å´ã€Œå·²ç§»é™¤ã€æ¸…å–®æ¢å¾©å–®å­—ã€‚"); return null; }
  return activeLibrary[Math.floor(Math.random() * activeLibrary.length)];
}

function nextWord() {
  currentWord = getRandomWord();
  if (!currentWord) return;
  document.getElementById("meaning").textContent = currentWord.zh;
  document.getElementById("resultMsg").textContent = "";
  renderInputBoxes(currentWord.en);
}

function renderInputBoxes(word) {
  const area = document.getElementById("inputArea");
  area.innerHTML = "";
  for (let i = 0; i < word.length; i++) {
    const input = document.createElement("input");
    input.type = "text";
    input.maxLength = 1;
    input.className = "letter-box";
    input.dataset.index = i;
    
    // æ‰‹æ©Ÿéµç›¤å„ªåŒ–ï¼šé—œé–‰è‡ªå‹•å®Œæˆã€è‡ªå‹•æ ¡æ­£ã€æ‹¼å­—æª¢æŸ¥
    input.setAttribute("autocomplete", "off");
    input.setAttribute("autocorrect", "off");
    input.setAttribute("autocapitalize", "off");
    input.setAttribute("spellcheck", "false");
    
    // è®“æ‰‹æ©ŸçŸ¥é“é€™æ˜¯ä¸€èˆ¬æ–‡å­—è¼¸å…¥
    input.inputMode = "text";

    input.addEventListener("input", e => {
      e.target.value = e.target.value.toLowerCase();
      const next = e.target.nextElementSibling;
      if (next && e.target.value) next.focus();
    });

    input.addEventListener("keydown", e => {
      if (e.key === "Backspace" && !e.target.value) {
        const prev = e.target.previousElementSibling;
        if (prev) {
          prev.focus();
          // æ‰‹æ©Ÿä¸Š backspace æœ‰æ™‚éœ€è¦å»¶é²ä¸€ä¸‹ç¢ºä¿æ¸¸æ¨™ä½ç½®
          setTimeout(() => prev.value = "", 0);
        }
      }
      if (e.key === "Enter") checkAnswer();
    });

    area.appendChild(input);
  }
  // é›»è…¦ç‰ˆè‡ªå‹•èšç„¦ç¬¬ä¸€å€‹ï¼Œæ‰‹æ©Ÿç‰ˆç‚ºäº†ä¸ä¸€ç›´è·³éµç›¤æ“‹ç•«é¢ï¼Œå¯ä»¥é¸æ“‡ä¸è‡ªå‹•èšç„¦ï¼Œ
  // ä½†ç‚ºäº†é€£çºŒè¼¸å…¥æ–¹ä¾¿ï¼Œé€™è£¡ä¿ç•™è‡ªå‹•èšç„¦ã€‚
  setTimeout(() => area.querySelector("input").focus(), 100);
}

function clearInputs() {
  document.querySelectorAll(".letter-box").forEach(i => i.value = "");
  document.querySelector(".letter-box")?.focus();
  document.getElementById("resultMsg").textContent = "";
}

function speakWord() {
  if (!currentWord.en) return;
  
  // åœæ­¢ç•¶å‰èªéŸ³ï¼Œé¿å…é‡ç–Š
  speechSynthesis.cancel();

  const msg = new SpeechSynthesisUtterance(currentWord.en);
  msg.lang = "en-US";
  msg.rate = 0.8; // ç¨å¾®æ”¾æ…¢ä¸€é»èªé€Ÿ
  speechSynthesis.speak(msg);
}

function checkAnswer() {
  const inputs = document.querySelectorAll(".letter-box");
  const answer = Array.from(inputs).map(i => i.value.toLowerCase()).join("");
  const correctWord = currentWord.en.toLowerCase();

  // é˜²æ­¢ç©ºç­”
  if (answer.length === 0) return;

  total++;
  if (answer === correctWord) {
    correct++;
    document.getElementById("resultMsg").textContent = "âœ… æ­£ç¢ºï¼";
    inputs.forEach(i => i.classList.add("correct"));
    setTimeout(nextWord, 1000); // ç­”å°å¾Œå»¶é² 1 ç§’è‡ªå‹•ä¸‹ä¸€é¡Œ
  } else {
    wrong++;
    document.getElementById("resultMsg").textContent = `âŒ éŒ¯èª¤ï¼Œæ­£ç¢ºæ˜¯ï¼š${currentWord.en}`;
  }

  history.push({ zh: currentWord.zh, en: currentWord.en, ok: answer === correctWord });
  saveAll();
  updateHistory();
  updateStats();
}

function updateStats() {
  const acc = total > 0 ? Math.round((correct / total) * 100) : 0;
  document.getElementById("stat-practiced").textContent = total;
  document.getElementById("stat-correct").textContent = correct;
  document.getElementById("stat-wrong").textContent = wrong;
  document.getElementById("stat-accuracy").textContent = acc;
  document.getElementById("progress-bar").style.width = acc + "%";
}

function updateHistory() {
  const list = document.getElementById("historyList");
  list.innerHTML = "";
  // é¡¯ç¤ºæœ€è¿‘ 50 ç­†
  history.slice(-50).reverse().forEach(h => {
    const li = document.createElement("li");
    li.innerHTML = `<span style="color:${h.ok ? '#00ff99' : '#ff6666'}">${h.en}</span> <small style="color:#aaa">(${h.zh})</small>`;
    list.appendChild(li);
  });
}

function resetHistory() {
  if (confirm("ç¢ºå®šè¦æ¸…ç©ºæ­·å²ç´€éŒ„å—ï¼Ÿ")) {
    history = [];
    total = 0; correct = 0; wrong = 0;
    saveAll();
    updateHistory();
    updateStats();
    document.getElementById("resultMsg").textContent = "";
  }
}

function moveToDeleted() {
  const select = document.getElementById("mainLibrary");
  const sel = Array.from(select.selectedOptions).map(o => parseInt(o.value));
  if(sel.length === 0) return alert("è«‹å…ˆé¸æ“‡è¦ç§»é™¤çš„å–®å­—");
  
  sel.sort((a,b)=>b-a).forEach(i => deletedLibrary.push(activeLibrary.splice(i,1)[0]));
  updateLibraryDisplay(); saveAll();
}

function moveToLibrary() {
  const select = document.getElementById("deletedLibrary");
  const sel = Array.from(select.selectedOptions).map(o => parseInt(o.value));
  if(sel.length === 0) return alert("è«‹å…ˆé¸æ“‡è¦æ¢å¾©çš„å–®å­—");

  sel.sort((a,b)=>b-a).forEach(i => activeLibrary.push(deletedLibrary.splice(i,1)[0]));
  updateLibraryDisplay(); saveAll();
}

function resetLibrary() {
  if (confirm("ç¢ºå®šè¦é‡ç½®é¡Œåº«å—ï¼Ÿé€™å°‡æœƒæŠŠæ‰€æœ‰å–®å­—æ”¾å›ç·´ç¿’æ¸…å–®ã€‚")) {
    activeLibrary = [...fullWords];
    deletedLibrary = [];
    saveAll();
    updateLibraryDisplay();
  }
}

// åˆå§‹åŒ–
updateLibraryDisplay();
updateHistory();
updateStats(); // ç¢ºä¿é‡æ–°æ•´ç†å¾Œçµ±è¨ˆæ•¸æ“šé‚„åœ¨ (å¦‚æœä¹‹å‰æœ‰å­˜çš„è©±ï¼Œé€™è£¡ç›®å‰æ˜¯é‡ç½®ç‚º0ï¼Œè‹¥è¦ä¿å­˜çµ±è¨ˆéœ€æ”¹localStorageé‚è¼¯ï¼Œç›®å‰ç¶­æŒåŸæ¨£)
nextWord();
</script>
</body>
</html>
